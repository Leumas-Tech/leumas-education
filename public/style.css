:root { --bg:#0b1020; --panel:#121a33; --text:#e6ecff; --muted:#9aa3c7; --accent:#2d47ff; }
* { box-sizing:border-box; }
body { margin:0; background:var(--bg); color:var(--text); font-family: ui-sans-serif, system-ui, -apple-system; }
.top { display:flex; gap:12px; align-items:center; padding:12px 16px; }
.top h1 { font-size:18px; margin:0; }
.top .back { color:#9aa3c7; text-decoration:none; }
.top button { background: var(--accent); color:white; border:none; padding:8px 12px; border-radius:8px; cursor:pointer; }
.grid { padding: 0 16px 16px; display:grid; gap:12px; grid-template-columns: 1fr; max-width: 920px; margin: 0 auto; }
.card { background: rgba(18,26,51,.9); border:1px solid rgba(255,255,255,.08); border-radius:12px; padding:12px; }
.row { display:flex; gap:8px; align-items:center; }
.small { background:#1e2a66; color:white; border:none; padding:6px 10px; border-radius:6px; cursor:pointer; }
.steps { margin:6px 0; padding-left:18px; color:var(--muted); }
.brief { margin:8px 0; padding:8px; background:#0f1530; border:1px solid rgba(255,255,255,.08); border-radius:8px; }
.exercise { margin:8px 0; padding:8px; background:#0f1430; border:1px solid rgba(255,255,255,.08); border-radius:8px; }
.exercise .ex-title { font-weight:600; margin-bottom:4px; }
.exercise pre { margin-top:6px; overflow:auto; background:#0b1020; border:1px solid rgba(255,255,255,.06); padding:8px; border-radius:6px; }
.badge { display:inline-block; padding:2px 8px; border-radius:999px; font-size:12px; }
.badge.done { background:#103a2a; color:#aaf0d1; }
.badge.pending { background:#2d234a; color:#c5b8ff; }
.proof { display:flex; gap:8px; align-items:flex-start; margin-top:6px; flex-wrap:wrap; }
input[type="number"], input[type="text"], textarea { background:#0f1530; border:1px solid rgba(255,255,255,.08); color:var(--text); padding:6px 8px; border-radius:6px; }
.grass { display:grid; grid-template-columns: repeat(53, 8px); gap:2px; margin-top:8px; }
.cell { width:8px; height:8px; border-radius:2px; background:#0b1020; }

/* chat */
.chat-panel { display:flex; flex-direction:column; gap:8px; }
.chat-header { display:flex; align-items:center; justify-content:space-between; padding:8px 10px; border:1px solid rgba(255,255,255,.08); border-radius:10px; background:linear-gradient(180deg,#101937,#0d142e); }
.chat-title { display:flex; align-items:center; gap:8px; font-weight:600; }
.chatbot-badge { background:#2d47ff; color:white; font-size:12px; padding:2px 8px; border-radius:999px; }
.chat-status { font-size:12px; color:#9aa3c7; }
.chat-box { max-height:380px; min-height:200px; overflow:auto; padding:12px; border:1px solid rgba(255,255,255,.08); border-radius:12px; background:#0f1530; scroll-behavior:smooth; }
.msg-row { display:flex; gap:8px; margin:10px 0; }
.msg-row.user { flex-direction: row-reverse; }
.avatar { width:32px; height:32px; border-radius:50%; display:flex; align-items:center; justify-content:center; font-size:12px; font-weight:700; background:#1b275a; color:#c9d3ff; flex:0 0 32px; box-shadow: 0 1px 0 rgba(0,0,0,.2); }
.avatar.ai { background: radial-gradient(circle at 30% 30%, #2d47ff, #1a2c7d); color:white; }
.bubble { max-width:78%; padding:10px 12px; border-radius:14px; line-height:1.45; font-size:14px; border:1px solid rgba(255,255,255,.07); box-shadow: 0 1px 0 rgba(0,0,0,.25); white-space: pre-wrap; word-wrap: break-word; }
.user .bubble { background:#18224d; color:#e6ecff; border-color:rgba(255,255,255,.10); }
.assistant .bubble { background:#121a33; color:#e9eeff; }
.meta { font-size:11px; opacity:.7; margin-top:4px; }
.typing { display:flex; align-items:center; gap:8px; padding:0 6px; margin-top:6px; }
.typing .dots { display:flex; gap:4px; }
.typing .dots span { width:6px; height:6px; border-radius:50%; background:#6b79ad; display:inline-block; animation: blink 1.2s infinite ease-in-out; }
.typing .dots span:nth-child(2){ animation-delay:.15s } .typing .dots span:nth-child(3){ animation-delay:.3s }
.hidden { display:none !important; }
@keyframes blink { 0%,80%,100%{opacity:.2} 40%{opacity:1} }
.chat-actions { display:flex; gap:6px; flex-wrap:wrap; }
.pill { background:#0f1530; color:#c9d3ff; border:1px solid rgba(255,255,255,.08); padding:4px 8px; border-radius:999px; font-size:12px; cursor:pointer; }
.pill:hover { border-color: rgba(255,255,255,.16); }
.chat-input { display:flex; gap:8px; align-items:flex-end; border:1px solid rgba(255,255,255,.08); border-radius:12px; padding:8px; background:#0f1530; }
.chat-input textarea { flex:1; background:transparent; border:none; resize:vertical; color:#e6ecff; outline:none; font: inherit; line-height:1.35; }
.send-btn { background:#2d47ff; color:white; border:none; padding:8px 12px; border-radius:8px; cursor:pointer; }
.send-btn:disabled { opacity:.6; cursor:not-allowed; }
.bubble pre { margin:.5em 0; background:#0b1020; padding:8px; border-radius:8px; overflow:auto; border:1px solid rgba(255,255,255,.06); }
.copy-wrap { display:flex; justify-content:flex-end; }
.copy-btn { font-size:11px; opacity:.8; background:#1a274f; color:#e6ecff; border:1px solid rgba(255,255,255,.12); border-radius:6px; padding:2px 6px; cursor:pointer; }
.copy-btn:hover { opacity:1; }



/* result panel */
.result {
  border:1px solid rgba(255,255,255,.12);
  background:#0f1c42;
  border-radius:10px;
  padding:8px 10px;
  margin-bottom:10px;
}
.result .title { font-weight:700; margin-bottom:4px; }
.result.good { border-color:#1c804f; background:#0e2a22; }
.result.bad { border-color:#7c1c1c; background:#2a0e0e; }
.result pre { margin:.5em 0; background:#0b1020; padding:8px; border-radius:8px; overflow:auto; border:1px solid rgba(255,255,255,.06); }















/* result panel (already added before, here for completeness) */
.result { border:1px solid rgba(255,255,255,.12); background:#0f1c42; border-radius:10px; padding:8px 10px; margin-bottom:10px; }
.result .title { font-weight:700; margin-bottom:4px; }
.result.good { border-color:#1c804f; background:#0e2a22; }
.result.bad { border-color:#7c1c1c; background:#2a0e0e; }





/* Busy overlay */
.busy {
  position: fixed;
  left: 50%;
  bottom: 18px;
  transform: translateX(-50%);
  display: flex;
  gap: 10px;
  align-items: center;
  background: rgba(17, 25, 64, .95);
  border: 1px solid rgba(255,255,255,.15);
  border-radius: 999px;
  padding: 10px 14px;
  z-index: 9999;
  box-shadow: 0 6px 24px rgba(0,0,0,.35);
}
.busy.hidden { display: none; }
.spinner {
  width: 18px; height: 18px; border-radius: 50%;
  border: 2px solid rgba(255,255,255,.25);
  border-top-color: white;
  animation: spin 1s linear infinite;
}
@keyframes spin { to { transform: rotate(360deg); } }
.busy-text { font-size: 13px; opacity: .9; }

/* Today's items list */
.today-list { display:flex; flex-direction:column; gap:6px; }
.today-item {
  display:flex; align-items:center; justify-content:space-between;
  padding:8px 10px; border:1px solid rgba(255,255,255,.12); border-radius:10px;
  background:#0b1020; cursor:pointer;
}
.today-item .meta { font-size:12px; opacity:.8; }
.today-item.active { outline:2px solid #2d47ff; }
